//first step crete account name class
class Account {

    private String accountNumber;
    private String pin;
    private double balance;

    // Constructor
    public Account(String accountNumber, String pin, double balance) {
        this.accountNumber = accountNumber;
        this.pin = pin;
        this.balance = balance;
    }

    // Validate PIN
    public boolean validatePin(String inputPin) {
        return this.pin.equals(inputPin);
    }

    // Deposit Method
    public void deposit(double amount) {
        if (amount > 0) {
            balance += amount;
            System.out.println("Amount Deposited Successfully.");
        } else {
            System.out.println("Invalid Deposit Amount.");
        }
    }

    // Withdraw Method
    public void withdraw(double amount) throws InsufficientFundsException {
        if (amount > balance) {
            throw new InsufficientFundsException("Insufficient Balance!");
        } else {
            balance -= amount;
            System.out.println("Withdrawal Successful.");
        }
    }

    // Check Balance
    public void checkBalance() {
        System.out.println("Current Balance: " + balance);
    }
}
//second step
class InsufficientFundsException extends Exception {

    public InsufficientFundsException(String message) {
        super(message);
    }
}
//step 3
import java.util.Scanner;

public class ATM {

    public static void main(String[] args) {

        Scanner sc = new Scanner(System.in);

        // Hardcoded Account
        Account userAccount = new Account("1001", "1234", 5000.0);

        int attempts = 0;
        boolean authenticated = false;

        // Login System
        while (attempts < 3) {
            System.out.print("Enter PIN: ");
            String inputPin = sc.nextLine();

            if (userAccount.validatePin(inputPin)) {
                authenticated = true;
                break;
            } else {
                attempts++;
                System.out.println("Wrong PIN! Attempts left: " + (3 - attempts));
            }
        }

        if (!authenticated) {
            System.out.println("Account Locked! Too many failed attempts.");
            System.exit(0);
        }

        // ATM Menu
        while (true) {
            System.out.println("\n===== ATM MENU =====");
            System.out.println("1. Check Balance");
            System.out.println("2. Deposit");
            System.out.println("3. Withdraw");
            System.out.println("4. Exit");
            System.out.print("Choose Option: ");

            int choice = sc.nextInt();

            switch (choice) {

                case 1:
                    userAccount.checkBalance();
                    break;

                case 2:
                    System.out.print("Enter Deposit Amount: ");
                    double depositAmount = sc.nextDouble();
                    userAccount.deposit(depositAmount);
                    break;

                case 3:
                    System.out.print("Enter Withdrawal Amount: ");
                    double withdrawAmount = sc.nextDouble();
                    try {
                        userAccount.withdraw(withdrawAmount);
                    } catch (InsufficientFundsException e) {
                        System.out.println(e.getMessage());
                    }
                    break;

                case 4:
                    System.out.println("Thank You for Using ATM.");
                    System.exit(0);

                default:
                    System.out.println("Invalid Option! Try Again.");
            }
        }
    }
}
